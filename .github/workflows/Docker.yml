
# This workflow will build a golang project
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-go

name: Docker

on:
  workflow_call:
    
jobs:
    docker:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v4

        - name: Setup Docker Build
          uses: docker/setup-buildx-action@v3.4.0

        - name: Download a Build Artifact
          uses: actions/download-artifact@v4.1.8
          with:
            # Name of the artifact to download. If unspecified, all artifacts for the run are downloaded.
            name: Programa
        
        - name: Docker Login
          uses: docker/login-action@v3.2.0
          with:
            username: ${{ secrets.USER_DOCKER }}
            password: ${{ secrets.PASSWD_DOCKER }}

        - name: Build and push Docker images
        # You may pin to the exact commit or the version.
        # uses: docker/build-push-action@a254f8ca60a858f3136a2f1f23a60969f2c402dd
          uses: docker/build-push-action@v6.4.0
          with:
            context: .
            # Path to the Dockerfile
            file: ./Dockerfile
            # Push is a shorthand for --output=type=registry
            push: true
            tags: rodrigo453/go_ci:${{ github.ref_name }} 
          
            

          
          
 
     
